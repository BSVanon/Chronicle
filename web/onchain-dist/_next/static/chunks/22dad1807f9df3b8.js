(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72436,48425,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(74080);var a=e.i(91918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let n=(0,a.createSlot)(`Primitive.${i}`),s=r.forwardRef((e,r)=>{let{asChild:a,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?n:i,{...s,ref:r})});return s.displayName=`Primitive.${i}`,{...e,[i]:s}},{});e.s(["Primitive",()=>i],48425);var n="horizontal",s=["horizontal","vertical"],o=r.forwardRef((e,r)=>{var a;let{decorative:o,orientation:l=n,...d}=e,c=(a=l,s.includes(a))?l:n;return(0,t.jsx)(i.div,{"data-orientation":c,...o?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:r})});o.displayName="Separator";var l=e.i(75157);function d({className:e,orientation:r="horizontal",decorative:a=!0,...i}){return(0,t.jsx)(o,{"data-slot":"separator",decorative:a,orientation:r,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...i})}e.s(["Separator",()=>d],72436)},15288,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>s,"CardHeader",()=>i,"CardTitle",()=>n])},93479,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,type:a,...i}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>a])},24687,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},4303,e=>{"use strict";let t="https://api.whatsonchain.com/v1/bsv/main";function r(e){let t=e=>{let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!0),Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")},r=e=>(e.match(/.{2}/g)??[]).reverse().join(""),a=parseInt(e.bits,16);return[t(e.version),r(e.prevBlockHash.padStart(64,"0")),r(e.merkleRoot.padStart(64,"0")),t(e.time),t(a),t(e.nonce)].join("")}async function a(e,r){try{let a=await fetch(`${t}/block/height/${e}`,{signal:r});if(!a.ok)return null;let i=await a.json();return{hash:i.hash,height:i.height,version:i.version,prevBlockHash:i.previousblockhash??"",merkleRoot:i.merkleroot,time:i.time,bits:i.bits,nonce:i.nonce}}catch{return null}}async function i(e){try{let r=await fetch(`${t}/chain/info`,{signal:e});if(!r.ok)return null;return(await r.json()).blocks??null}catch{return null}}let n=[{name:"WhatsOnChain",fetchTip:i,fetchHeader:a}];async function s(e){let t=[],r=n.map(async t=>{try{let r=await t.fetchTip(e);return{source:t.name,height:r}}catch{return{source:t.name,height:null}}});t.push(...await Promise.all(r));let a=t.filter(e=>null!==e.height);if(0===a.length)return{height:null,consensus:!1,sources:[]};if(1===a.length)return{height:a[0].height,consensus:!1,sources:[a[0].source]};let i=new Map;for(let e of a)if(null!==e.height){let t=i.get(e.height)||[];t.push(e.source),i.set(e.height,t)}let s=null,o=[];for(let[e,t]of i)t.length>=2&&t.length>o.length&&(s=e,o=t);if(null!==s)return{height:s,consensus:!0,sources:o};let l=a.reduce((e,t)=>(t.height??0)>(e.height??0)?t:e);return{height:l.height,consensus:!1,sources:[l.source]}}async function o(e,r){try{let a=await fetch(`${t}/tx/${e}/hex`,{signal:r});if(!a.ok)return null;return await a.text()}catch{return null}}async function l(r,a){try{let{Beef:i,MerklePath:n,Transaction:s}=await e.A(28627),l=await o(r,a);if(!l)return console.warn(`[assembleBeef] Could not fetch raw tx for ${r}`),null;let d=await fetch(`${t}/tx/${r}/proof/tsc`,{signal:a});if(!d.ok)return console.warn(`[assembleBeef] Could not fetch TSC proof for ${r}`),null;let c=await d.json(),h=Array.isArray(c)?c[0]:c;if(!h||"number"!=typeof h.index||!Array.isArray(h.nodes))return console.warn(`[assembleBeef] Invalid TSC proof format for ${r}`,h),null;let u="height"===h.targetType?h.target:h.blockHeight??0;if(!u){let e=h.target;if(e&&"string"==typeof e&&64===e.length){let r=await fetch(`${t}/block/hash/${e}`,{signal:a});if(r.ok){let e=await r.json();e.height&&(h.blockHeight=e.height)}}}let f=h.blockHeight??u;if(!f)return console.warn(`[assembleBeef] Could not determine block height for ${r}`),null;let g=[],m=h.index,x=[{offset:m,hash:r,txid:!0}];if(h.nodes.length>0){let e=h.nodes[0],t=m%2==0?m+1:m-1;"*"===e?x.push({offset:t,duplicate:!0}):x.push({offset:t,hash:e})}g.push(x),m=Math.floor(m/2);for(let e=1;e<h.nodes.length;e++){let t=h.nodes[e],r=m%2==0?m+1:m-1,a=[];"*"===t?a.push({offset:r,duplicate:!0}):a.push({offset:r,hash:t}),g.push(a),m=Math.floor(m/2)}let p=new n(f,g);p.computeRoot(r);let b=s.fromHex(l);b.merklePath=p;let v=new i;return v.mergeTransaction(b),{beefHex:v.toHex(),height:f}}catch(e){return console.error(`[assembleBeef] Error assembling BEEF for ${r}:`,e),null}}e.s(["assembleBeefFromTxid",()=>l,"constructHeaderHex",()=>r,"fetchChainTip",()=>i,"fetchChainTipMultiSource",()=>s,"fetchHeaderByHeight",()=>a,"fetchRawTx",()=>o])},18566,(e,t,r)=>{t.exports=e.r(76562)},25593,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(15288),i=e.i(19455),n=e.i(24687),s=e.i(74153),o=e.i(81611);async function l(e){let t=Uint8Array.from(atob(e),e=>e.charCodeAt(0));return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}function d({onStatusChange:e}){let{save:d,refresh:c}=(0,s.useBeefStore)(),{dossiers:h,save:u}=(0,o.useDossiers)(),[f,g]=r.useState(""),m=async()=>{if(e(null),!f.trim())return void e("Please paste BEEF data to import.");try{let t,r=JSON.parse(f);t=Array.isArray(r)?r:[r];let a=0,i=0;for(let e of t){if(!e.txid||!e.beef)continue;let t=e.beef,r=await l(t),n={txid:e.txid,beef:t,beef_hash:r,height:e.height??0,header_hash:e.header_hash??"",utxos:e.utxos??[],labels:e.labels??[],bucket:e.bucket??"",created_at:new Date().toISOString(),integrity:{archive_hash:r,algo:"sha256"}};if((await d(n)).ok)for(let e of(a++,h))e.funding_txid===n.txid&&!e.beef_hash&&(await u({...e,beef_hash:r}),i++)}g(""),await c(),e(`Imported ${a} BEEF archive(s).${i>0?` Linked to ${i} dossier(s).`:""}`)}catch(t){e(`Import error: ${t instanceof Error?t.message:"Unknown"}`)}};return(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:"Import BEEF"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Paste BEEF JSON data (single object or array) to import proof archives."}),(0,t.jsx)(n.Textarea,{placeholder:'{"txid": "...", "beef": "base64...", "height": 123456}',value:f,onChange:e=>g(e.target.value),rows:6}),(0,t.jsx)(i.Button,{onClick:m,children:"Import"})]})]})}e.s(["BeefImport",()=>d])},20676,e=>{"use strict";function t(e,t){return Math.floor(Math.random()*(t-e+1))+e}function r(e){return new Promise(t=>setTimeout(t,e))}async function a(){let e=t(500,3e3);await r(e)}async function i(){let e=t(3e3,8e3);await r(e)}function n(e=1){let t=[];for(let r=0;r<e;r++){let e=new Uint8Array(32);crypto.getRandomValues(e);let r=Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("");t.push(r)}return t}function s(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function o(e){let r=[],a=[...e];for(;a.length>0;){let e=Math.min(t(3,7),a.length);r.push(a.slice(0,e)),a=a.slice(e)}return r}Date.now(),e.s(["applyBatchDelay",()=>i,"applyRequestJitter",()=>a,"createBatches",()=>o,"generateDecoyTxids",()=>n,"shuffleArray",()=>s])},77936,58004,76307,5081,e=>{"use strict";e.i(25593);var t=e.i(43476),r=e.i(71645),a=e.i(15288),i=e.i(19455),n=e.i(93479),s=e.i(87486),o=e.i(74153),l=e.i(81611),d=e.i(28409),c=e.i(4303),h=e.i(20676);async function u(e){let t=Uint8Array.from(atob(e),e=>e.charCodeAt(0));return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}function f({onStatusChange:e,initialTxid:f="",autoTriggerBatch:g,onAutoTriggerComplete:m}){let{archives:x,save:p,refresh:b}=(0,o.useBeefStore)(),{dossiers:v,save:y}=(0,l.useDossiers)(),{mode:w,requestOnline:k}=(0,d.useNetworkMode)(),[j,B]=r.useState(f),[S,C]=r.useState(!1),[E,N]=r.useState(!1),[H,$]=r.useState(null),[A,F]=r.useState(!1);r.useEffect(()=>{f&&B(f)},[f]),r.useEffect(()=>{let e=v.filter(e=>!e.beef_hash);g&&"online_shielded"===w&&!A&&e.length>0&&(F(!0),T().then(()=>{m?.()}))},[g,w,A,v]);let _=async()=>{if(e(null),"online_shielded"!==w&&!await k())return void e("Cancelled. Stay in Offline mode.");let t=j.trim().toLowerCase();if(!t||64!==t.length)return void e("Please enter a valid 64-character txid.");let r=x.find(e=>e.txid===t),a=!1;if(r){if(!window.confirm("BEEF for this txid already exists. Re-fetch to replace it?"))return void e("Cancelled. Existing BEEF kept.");a=!0}C(!0);try{let i=await (0,c.assembleBeefFromTxid)(t);if(!i)return void e("Could not fetch BEEF. The transaction may be unconfirmed or the proof unavailable.");let n=(e=>{let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substr(r,2),16);return t})(i.beefHex),s=btoa(String.fromCharCode(...n)),o=await u(s),l={txid:t,beef:s,beef_hash:o,height:i.height,header_hash:"",utxos:r?.utxos??[],labels:r?.labels??[],bucket:r?.bucket??"",created_at:r?.created_at??new Date().toISOString(),integrity:{archive_hash:o,algo:"sha256"}},d=await p(l,{force:a});if(!d.ok)return void e(`Save failed: ${d.message}`);let h=0;for(let e of v)e.funding_txid===t&&!e.beef_hash&&(await y({...e,beef_hash:o}),h++);B(""),await b(),e(`BEEF fetched and stored for ${t.slice(0,8)}... (height ${i.height})${h>0?`. Linked to ${h} dossier(s).`:""}`)}catch(t){e(`Fetch error: ${t instanceof Error?t.message:"Unknown"}`)}finally{C(!1)}},T=async()=>{if(e(null),"online_shielded"!==w&&!await k())return void e("Cancelled. Stay in Offline mode.");let t=v.filter(e=>!e.beef_hash);if(0===t.length)return void e("All dossiers already have BEEF proofs!");let r=[...new Set(t.map(e=>e.funding_txid))],a=(0,h.createBatches)(r).map(e=>{let t=Math.floor(2*Math.random())+1,r=(0,h.generateDecoyTxids)(t);return{items:(0,h.shuffleArray)([...e,...r]),realTxids:new Set(e)}});N(!0),$({current:0,total:r.length,success:0,failed:0});let i=0,n=0,s=0;for(let e=0;e<a.length;e++){let{items:o,realTxids:l}=a[e];for(let e=0;e<o.length;e++){let a=o[e],d=!l.has(a);d||$({current:++s,total:r.length,success:i,failed:n});try{let e=await (0,c.assembleBeefFromTxid)(a);if(d)continue;if(e){let r=(e=>{let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substr(r,2),16);return t})(e.beefHex),s=btoa(String.fromCharCode(...r)),o=await u(s),l={txid:a,beef:s,beef_hash:o,height:e.height,header_hash:"",utxos:[],labels:[],bucket:"",created_at:new Date().toISOString(),integrity:{archive_hash:o,algo:"sha256"}};if((await p(l)).ok){for(let e of t.filter(e=>e.funding_txid===a))await y({...e,beef_hash:o});i++}else n++}else n++}catch{!d&&n++}e<o.length-1&&await (0,h.applyRequestJitter)()}e<a.length-1&&await (0,h.applyBatchDelay)()}$({current:r.length,total:r.length,success:i,failed:n}),await b(),e(`Batch fetch complete: ${i} succeeded, ${n} failed.`),N(!1)},R=v.filter(e=>!e.beef_hash).length;return(0,t.jsxs)(a.Card,{id:"fetch-beef-section",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:"Fetch BEEF from Network"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter a txid to fetch its BEEF proof from WhatsOnChain (requires Online mode)."}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Input,{placeholder:"Transaction ID (64 hex characters)",value:j,onChange:e=>B(e.target.value.toLowerCase()),className:"font-mono text-xs"}),(0,t.jsx)(i.Button,{onClick:_,disabled:S,children:S?"Fetching...":"Fetch BEEF"})]}),R>0&&(0,t.jsxs)("div",{className:"rounded-md border p-3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm",children:[(0,t.jsx)(s.Badge,{variant:"outline",className:"mr-2",children:R}),"dossiers missing BEEF"]}),(0,t.jsx)(i.Button,{size:"sm",onClick:T,disabled:E,children:E?"Fetching...":"Fetch All Missing"})]}),H&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Progress: ",H.current,"/",H.total," •"," ",(0,t.jsxs)("span",{className:"text-green-600",children:[H.success," ok"]})," •"," ",(0,t.jsxs)("span",{className:"text-red-500",children:[H.failed," failed"]})]})]}),"online_shielded"!==w&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently offline. Clicking fetch will prompt to go online."})]})]})}e.s(["BeefFetch",()=>f],58004);var g=e.i(28860);e.i(51185);var m=e.i(83612),x=e.i(72988);async function p(e){try{let t=m.Beef.fromString(e,"base64"),r=t.getValidTxids();if(0===r.length)return{ok:!1,txid:null,height:null,merkleRoot:null,error:"No valid transactions found in BEEF"};let a=r[r.length-1],i=t.findBump(a);if(!i)return{ok:!1,txid:a,height:null,merkleRoot:null,error:"No merkle path found for subject transaction"};let n=i.blockHeight,s=i.computeRoot(a);if(!await ({async isValidRootForHeight(e,t){let r=await (0,x.getHeaderByHeight)(t);return!!r&&r.merkle_root.toLowerCase()===e.toLowerCase()},currentHeight:async()=>await (0,x.getTipHeight)()??0}).isValidRootForHeight(s,n)){let e=await (0,x.getHeaderByHeight)(n),t=await (0,x.getTipHeight)();if(!e){let e=null===t||n>t;return{ok:!1,txid:a,height:n,merkleRoot:s,error:e?`Missing header at height ${n.toLocaleString()}. Sync headers to height ${n.toLocaleString()} or higher.`:`Missing header at height ${n.toLocaleString()} (tip is ${t?.toLocaleString()}). Headers may have gaps.`,missingHeaders:!0}}return{ok:!1,txid:a,height:n,merkleRoot:s,error:`Merkle root mismatch at height ${n.toLocaleString()}. Proof may be invalid.`}}return{ok:!0,txid:a,height:n,merkleRoot:s,error:null}}catch(e){return{ok:!1,txid:null,height:null,merkleRoot:null,error:`Parse error: ${e instanceof Error?e.message:"Unknown error"}`}}}function b({onStatusChange:e,verifyResults:n,setVerifyResults:u,autoTrigger:f,onAutoTriggerComplete:b}){let{archives:v,loading:y,verifyIntegrity:w}=(0,o.useBeefStore)(),{dossiers:k,save:j}=(0,l.useDossiers)(),{tipHeight:B,headerCount:S}=(0,g.useHeaderStore)(),{mode:C,requestOnline:E}=(0,d.useNetworkMode)(),[N,H]=r.useState(!1),[$,A]=r.useState(!1),[F,_]=r.useState(!1),[T,R]=r.useState(null),I=async()=>{e(null),R(null);try{let t=await w();R(t),0===t.invalid.length?e(`Integrity check passed: ${t.valid} of ${t.total} BEEF archives valid.`):e(`Integrity check found ${t.invalid.length} invalid BEEF archive(s).`)}catch(t){e(`Integrity check error: ${t instanceof Error?t.message:"Unknown"}`)}};r.useEffect(()=>{f&&!y&&!F&&v.length>0&&(_(!0),P().then(()=>{b?.()}))},[f,y,F,v.length]);let M=async()=>{let e=new Map;for(let t of v){if(!t.beef)continue;let r=await p(t.beef);for(let a of(e.set(t.txid,r),u(e=>{let a=new Map(e);return a.set(t.txid,r),a}),k.filter(e=>e.funding_txid===t.txid)))await j({...a,verified:{at_height:B??0,ok:r.ok,checked_at:new Date().toISOString()}})}return e},P=async()=>{e(null),H(!0);try{e("Verifying proofs...");let t=await M(),r=Array.from(t.entries()).filter(([e,t])=>!t.ok&&t.missingHeaders);if(r.length>0){if("online_shielded"!==C&&!await E()){let a=Array.from(t.values()).filter(e=>e.ok).length;e(`Verified: ${a} of ${v.length}. ${r.length} need headers (stayed offline).`);return}e(`Fetching ${r.length} missing headers...`),A(!0);let a=new Set;for(let e of v)if(e.beef){e.height&&e.height>0&&(await (0,x.getHeaderByHeight)(e.height)||a.add(e.height));try{let t=Uint8Array.from(atob(e.beef),e=>e.charCodeAt(0));for(let e of m.Beef.fromBinary(Array.from(t)).bumps)await (0,x.getHeaderByHeight)(e.blockHeight)||a.add(e.blockHeight)}catch{}}let i=Array.from(a).sort((e,t)=>e-t),n=0;for(let t of i){try{let e=await (0,c.fetchHeaderByHeight)(t);e&&(await (0,x.saveHeader)({height:e.height,hash:e.hash,prev_hash:e.prevBlockHash,merkle_root:e.merkleRoot,timestamp:e.time,header_hex:(0,c.constructHeaderHex)(e)}),n++)}catch(e){console.warn(`Failed to fetch header ${t}:`,e)}await (0,h.applyRequestJitter)(),n%3==0&&e(`Fetched ${n} of ${i.length} headers...`)}A(!1),e("Re-verifying with new headers..."),t=await M()}let a=Array.from(t.values()).filter(e=>e.ok).length,i=Array.from(t.values()).filter(e=>!e.ok&&e.missingHeaders).length,n=Array.from(t.values()).filter(e=>!e.ok&&!e.missingHeaders).length,s=`✓ Verified: ${a} of ${v.length}.`;i>0&&(s+=` ${i} still need headers.`),n>0&&(s+=` ${n} failed verification.`),e(s)}catch(t){e(`Verification error: ${t instanceof Error?t.message:"Unknown"}`)}finally{H(!1),A(!1)}};return(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:"Verify Proofs"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)(s.Badge,{variant:"outline",children:[S," headers stored"]}),(0,t.jsxs)(s.Badge,{variant:"outline",children:["Tip: ",B??"none"]}),(0,t.jsxs)(s.Badge,{variant:"outline",children:[v.length," BEEF archives"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(i.Button,{onClick:I,variant:"outline",disabled:0===v.length,children:"Integrity Check"}),(0,t.jsx)(i.Button,{onClick:P,disabled:N||$||0===v.length,children:N?"Verifying...":$?"Fetching Headers...":"Verify All"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:'"Verify All" will automatically fetch any missing headers needed for verification.'}),T&&(0,t.jsx)("div",{className:`rounded-md border p-3 text-sm ${0===T.invalid.length?"border-green-500/30 bg-green-500/5 text-green-700 dark:text-green-400":"border-red-500/30 bg-red-500/5 text-red-700 dark:text-red-400"}`,children:0===T.invalid.length?(0,t.jsxs)("p",{children:["✓ All ",T.valid," BEEF archives passed integrity check."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:["✗ ",T.invalid.length," invalid archive(s):"]}),(0,t.jsx)("ul",{className:"mt-1 list-inside list-disc text-xs",children:T.invalid.slice(0,5).map(e=>(0,t.jsx)("li",{className:"truncate",children:e},e))})]})})]})]})}function v({verifyResults:e,onRefetchRequest:r}){let{archives:a,loading:n}=(0,o.useBeefStore)(),{dossiers:c}=(0,l.useDossiers)(),{mode:h}=(0,d.useNetworkMode)();return n?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):0===a.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No BEEF archives stored yet."}):(0,t.jsxs)("div",{className:"space-y-2",children:[a.slice(0,20).map(a=>{let n,o=e.get(a.txid),l=(n=a.txid,c.filter(e=>e.funding_txid===n).length),d=o?.ok?{borderColor:"rgba(22, 163, 74, 0.3)",backgroundColor:"rgba(22, 163, 74, 0.1)"}:o&&!o.ok?{borderColor:"rgba(239, 68, 68, 0.3)",backgroundColor:"rgba(239, 68, 68, 0.05)"}:{};return(0,t.jsxs)("div",{className:"rounded-md border p-3 text-sm bg-card/60",style:d,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("code",{className:"truncate text-xs",children:a.txid}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[o&&(0,t.jsx)(s.Badge,{variant:o.ok?"default":"destructive",className:"text-xs",children:o.ok?"✓ Verified":"✗ Failed"}),(0,t.jsxs)(s.Badge,{variant:"outline",className:"text-xs",children:["Height ",a.height]})]})]}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-muted-foreground",children:[l>0?(0,t.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:["Proves ",l," UTXO",1!==l?"s":""]}):(0,t.jsx)("span",{children:"No linked UTXOs"}),a.bucket&&(0,t.jsxs)("span",{children:[" • Bucket: ",a.bucket]}),o&&!o.ok&&o.error&&(0,t.jsxs)("span",{className:"ml-2 text-red-500",children:["— ",o.error]})]}),o&&!o.ok&&o.error?.includes("Parse error")&&"online_shielded"===h&&(0,t.jsx)(i.Button,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>r(a.txid),children:"Re-fetch BEEF (corrupted)"})]},a.txid)}),a.length>20&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["...and ",a.length-20," more"]})]})}e.s(["BeefVerify",()=>b],76307),e.s(["BeefArchiveList",()=>v],5081),e.s([],77936)},31552,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),i=e.i(72436);e.i(77936);var n=e.i(25593),s=e.i(58004),o=e.i(76307),l=e.i(5081);function d(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(c,{})})}function c(){let e=(0,a.useSearchParams)(),[d,c]=r.useState(null),[h,u]=r.useState(new Map),[f,g]=r.useState(null),[m,x]=r.useState(""),p=e.get("txid")??"";r.useEffect(()=>{let t=e.get("action");t&&g(t)},[e]);let b=()=>{g(null)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"BEEF Proofs"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage BEEF (Background Evaluation Extended Format) proof archives for your UTXOs."})]}),d&&(0,t.jsx)("div",{className:"rounded-md border border-blue-500/20 bg-blue-500/5 p-3 text-sm text-blue-600 dark:text-blue-400",children:d}),(0,t.jsx)(o.BeefVerify,{onStatusChange:c,verifyResults:h,setVerifyResults:u,autoTrigger:"verify"===f,onAutoTriggerComplete:b}),(0,t.jsx)(i.Separator,{}),(0,t.jsx)(s.BeefFetch,{onStatusChange:c,initialTxid:m||p,autoTriggerBatch:"batch"===f,onAutoTriggerComplete:b}),(0,t.jsx)(i.Separator,{}),(0,t.jsx)(n.BeefImport,{onStatusChange:c}),(0,t.jsx)(i.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Stored Archives"}),(0,t.jsx)(l.BeefArchiveList,{verifyResults:h,onRefetchRequest:e=>{x(e),document.getElementById("fetch-beef-section")?.scrollIntoView({behavior:"smooth"})}})]})]})}e.s(["default",()=>d])},28627,e=>{e.v(t=>Promise.all(["static/chunks/4c8470885cb93521.js"].map(t=>e.l(t))).then(()=>t(44270)))}]);