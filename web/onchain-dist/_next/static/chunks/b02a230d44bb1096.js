(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function i({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...i})}function s({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...i})}function r({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...i})}function n({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...i})}e.s(["Card",()=>i,"CardContent",()=>n,"CardHeader",()=>s,"CardTitle",()=>r])},72436,48425,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(74080);var i=e.i(91918),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let r=(0,i.createSlot)(`Primitive.${s}`),n=a.forwardRef((e,a)=>{let{asChild:i,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?r:s,{...n,ref:a})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{});e.s(["Primitive",()=>s],48425);var r="horizontal",n=["horizontal","vertical"],l=a.forwardRef((e,a)=>{var i;let{decorative:l,orientation:o=r,...d}=e,c=(i=o,n.includes(i))?o:r;return(0,t.jsx)(s.div,{"data-orientation":c,...l?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:a})});l.displayName="Separator";var o=e.i(75157);function d({className:e,orientation:a="horizontal",decorative:i=!0,...s}){return(0,t.jsx)(l,{"data-slot":"separator",decorative:i,orientation:a,className:(0,o.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}e.s(["Separator",()=>d],72436)},93479,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function i({className:e,type:i,...s}){return(0,t.jsx)("input",{type:i,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>i])},72483,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(22016),s=e.i(15288),r=e.i(19455),n=e.i(87486),l=e.i(72436),o=e.i(75157);let d=a.forwardRef(({className:e,onCheckedChange:a,...i},s)=>(0,t.jsx)("input",{type:"checkbox",className:(0,o.cn)("h-4 w-4 shrink-0 rounded border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,onChange:e=>a?.(e.target.checked),...i}));d.displayName="Checkbox";var c=e.i(93479),u=e.i(81611),x=e.i(74153);function h(){let{dossiers:e,buckets:o,loading:h,remove:f,refresh:m}=(0,u.useDossiers)(),{archives:p}=(0,x.useBeefStore)(),[v,g]=a.useState(null),[b,j]=a.useState("all"),[w,N]=a.useState(""),[y,k]=a.useState("newest"),[C,B]=a.useState(new Set),[S,_]=a.useState(!1),z=a.useMemo(()=>{let t=e;if("all"!==b&&(t=t.filter(e=>e.bucket===b)),w.trim()){let e=w.toLowerCase();t=t.filter(t=>t.outpoint.toLowerCase().includes(e)||t.funding_txid.toLowerCase().includes(e)||t.labels.some(t=>t.toLowerCase().includes(e)))}return[...t].sort((e,t)=>{switch(y){case"newest":return new Date(t.created_at).getTime()-new Date(e.created_at).getTime();case"oldest":return new Date(e.created_at).getTime()-new Date(t.created_at).getTime();case"value-high":return t.value_satoshis-e.value_satoshis;case"value-low":return e.value_satoshis-t.value_satoshis;default:return 0}})},[e,b,w,y]),E=async e=>{if(confirm(`Delete dossier ${e}?`))try{await f(e),g(`Deleted ${e}`)}catch(e){g(`Error: ${e instanceof Error?e.message:"Unknown"}`)}},T=e=>{let t=new Set(C);t.has(e)?t.delete(e):t.add(e),B(t)},D=async()=>{if(0===C.size)return void g("No UTXOs selected for export.");try{let t=e.filter(e=>C.has(e.outpoint)),a=[];for(let e of t)if(e.beef_hash){let t=p.find(t=>t.beef_hash===e.beef_hash);t&&a.push(t)}let i={version:1,exported_at:new Date().toISOString(),type:"utxo_bundle",dossiers:t,beef_archives:a,summary:{utxo_count:t.length,total_satoshis:t.reduce((e,t)=>e+t.value_satoshis,0),with_beef:t.filter(e=>e.beef_hash).length,verified:t.filter(e=>e.verified?.ok).length}},s=JSON.stringify(i,null,2),r=new Blob([s],{type:"application/json"}),n=URL.createObjectURL(r),l=document.createElement("a");l.href=n,l.download=`chronicle-utxos-${C.size}-${new Date().toISOString().slice(0,10)}.json`,l.click(),URL.revokeObjectURL(n),g(`Exported ${C.size} UTXO(s) with ${a.length} BEEF archive(s).`),_(!1),B(new Set)}catch(e){g(`Export error: ${e instanceof Error?e.message:"Unknown"}`)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"UTXO Dossiers"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"View and manage your UTXO inventory."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)(n.Badge,{variant:"outline",children:h?"...":`${e.length} dossiers`}),(0,t.jsxs)(n.Badge,{variant:"outline",children:[(e.reduce((e,t)=>e+t.value_satoshis,0)/1e8).toFixed(8)," BSV"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(r.Button,{asChild:!0,size:"sm",children:(0,t.jsx)(i.default,{href:"/add",children:"Add UTXO"})}),(0,t.jsx)(r.Button,{variant:S?"default":"outline",size:"sm",onClick:()=>{_(!S),S&&B(new Set)},children:S?"Cancel Select":"Select & Export"}),e.some(e=>!e.beef_hash)&&(0,t.jsx)(r.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,t.jsx)(i.default,{href:"/validation?action=batch",children:"Fetch Missing BEEF"})}),e.some(e=>e.beef_hash&&!e.verified?.ok)&&(0,t.jsx)(r.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,t.jsx)(i.default,{href:"/validation?action=verify",children:"Verify Proofs"})})]})]}),v&&(0,t.jsx)("div",{className:"rounded-md border border-blue-500/20 bg-blue-500/5 p-3 text-sm text-blue-600 dark:text-blue-400",children:v}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(c.Input,{placeholder:"Search by txid, outpoint, or label...",value:w,onChange:e=>N(e.target.value),className:"max-w-md"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Bucket:"}),(0,t.jsx)(r.Button,{variant:"all"===b?"default":"outline",size:"sm",onClick:()=>j("all"),children:"All"}),o.map(e=>(0,t.jsx)(r.Button,{variant:b===e.id?"default":"outline",size:"sm",onClick:()=>j(e.id),children:e.label},e.id))]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Sort:"}),(0,t.jsx)(r.Button,{variant:"newest"===y?"default":"outline",size:"sm",onClick:()=>k("newest"),children:"Newest"}),(0,t.jsx)(r.Button,{variant:"oldest"===y?"default":"outline",size:"sm",onClick:()=>k("oldest"),children:"Oldest"}),(0,t.jsx)(r.Button,{variant:"value-high"===y?"default":"outline",size:"sm",onClick:()=>k("value-high"),children:"Value ↓"}),(0,t.jsx)(r.Button,{variant:"value-low"===y?"default":"outline",size:"sm",onClick:()=>k("value-low"),children:"Value ↑"})]})]}),S&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-md border border-primary/30 bg-primary/5 p-3",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:[C.size," selected"]}),(0,t.jsxs)(r.Button,{size:"sm",variant:"outline",onClick:()=>{B(new Set(z.map(e=>e.outpoint)))},children:["Select All (",z.length,")"]}),(0,t.jsx)(r.Button,{size:"sm",variant:"outline",onClick:()=>{B(new Set)},children:"Clear"}),(0,t.jsx)(r.Button,{size:"sm",onClick:D,disabled:0===C.size,children:"Export Selected"})]}),(0,t.jsx)(l.Separator,{}),(0,t.jsx)("div",{className:"space-y-4",children:h?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):0===z.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No dossiers found."}):(0,t.jsx)("div",{className:"space-y-2",children:z.map(e=>{var a;let i;return(0,t.jsx)(s.Card,{className:`bg-card/60 ${S?"cursor-pointer":""} ${C.has(e.outpoint)?"ring-2 ring-primary":""}`,onClick:S?()=>T(e.outpoint):void 0,children:(0,t.jsx)(s.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[S&&(0,t.jsx)(d,{checked:C.has(e.outpoint),onCheckedChange:()=>T(e.outpoint),onClick:e=>e.stopPropagation(),className:"mt-1"}),(0,t.jsxs)("div",{className:"min-w-0 flex-1 space-y-1",children:[(0,t.jsx)("code",{className:"block truncate text-xs",children:e.outpoint}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-medium",children:[(e.value_satoshis/1e8).toFixed(8)," BSV"]}),(0,t.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:(a=e.bucket,i=o.find(e=>e.id===a),i?.label??a)}),e.beef_hash?(0,t.jsx)(n.Badge,{variant:"default",className:"text-xs bg-green-600",children:"BEEF ✓"}):(0,t.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:"No BEEF"}),e.verified?.ok===!0?(0,t.jsx)(n.Badge,{variant:"default",className:"text-xs bg-blue-600",children:"Proof Verified ✓"}):e.verified?.ok===!1?(0,t.jsx)(n.Badge,{variant:"destructive",className:"text-xs",title:"BEEF proof failed verification against local headers. May need updated headers.",children:"Proof Failed ✗"}):e.beef_hash?(0,t.jsx)(n.Badge,{variant:"outline",className:"text-xs",title:"Has BEEF but not yet verified against headers",children:"Not Verified"}):null]}),e.labels.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.labels.map(e=>(0,t.jsx)(n.Badge,{variant:"outline",className:"text-xs bg-gray-700 text-gray-100 border-gray-600 dark:bg-gray-200 dark:text-gray-800 dark:border-gray-300",children:e},e))}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Added: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600",onClick:()=>E(e.outpoint),children:"Delete"})]})})},e.outpoint)})})})]})}e.s(["default",()=>h],72483)}]);