(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var r=e.i(43476),t=e.i(75157);function a({className:e,...a}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function i({className:e,...a}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function s({className:e,...a}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>n,"CardHeader",()=>i,"CardTitle",()=>s])},72436,48425,e=>{"use strict";var r=e.i(43476),t=e.i(71645);e.i(74080);var a=e.i(91918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let s=(0,a.createSlot)(`Primitive.${i}`),n=t.forwardRef((e,t)=>{let{asChild:a,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(a?s:i,{...n,ref:t})});return n.displayName=`Primitive.${i}`,{...e,[i]:n}},{});e.s(["Primitive",()=>i],48425);var s="horizontal",n=["horizontal","vertical"],o=t.forwardRef((e,t)=>{var a;let{decorative:o,orientation:l=s,...d}=e,c=(a=l,n.includes(a))?l:s;return(0,r.jsx)(i.div,{"data-orientation":c,...o?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});o.displayName="Separator";var l=e.i(75157);function d({className:e,orientation:t="horizontal",decorative:a=!0,...i}){return(0,r.jsx)(o,{"data-slot":"separator",decorative:a,orientation:t,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...i})}e.s(["Separator",()=>d],72436)},93479,e=>{"use strict";var r=e.i(43476),t=e.i(75157);function a({className:e,type:a,...i}){return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>a])},10204,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(48425),i=t.forwardRef((e,t)=>(0,r.jsx)(a.Primitive.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var s=e.i(75157);function n({className:e,...t}){return(0,r.jsx)(i,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>n],10204)},83853,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(22016),i=e.i(15288),s=e.i(19455),n=e.i(93479),o=e.i(10204),l=e.i(87486),d=e.i(72436),c=e.i(81611),u=e.i(74153),p=e.i(28860),h=e.i(72988);function x(){let{dossiers:e,buckets:x,save:f,replaceBuckets:m,refresh:v}=(0,c.useDossiers)(),{archives:y,index:g,save:b,refresh:w}=(0,u.useBeefStore)(),{refresh:j}=(0,p.useHeaderStore)(),[C,S]=t.useState(null),[E,N]=t.useState(""),[k,A]=t.useState(""),[B,U]=t.useState(!1),O=t.useRef(null),D=e.length,R=y.length,P=x.length,T=async()=>{S(null);try{let r=await (0,h.exportHeaderStore)(),t={version:1,exported_at:new Date().toISOString(),headers:r,beef:y,beef_index:g,dossiers:e,buckets:x},a=JSON.stringify(t,null,2),i=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(i),n=document.createElement("a");n.href=s,n.download=`chronicle-archive-${new Date().toISOString().slice(0,10)}.json`,n.click(),URL.revokeObjectURL(s),S("Archive exported successfully (unencrypted).")}catch(e){S(`Export error: ${e instanceof Error?e.message:"Unknown"}`)}},I=async()=>{if(S(null),!E||E.length<8)return void S("Please enter a passphrase of at least 8 characters.");try{let r=await (0,h.exportHeaderStore)(),t={version:1,exported_at:new Date().toISOString(),headers:r,beef:y,beef_index:g,dossiers:e,buckets:x},a=JSON.stringify(t),i=new TextEncoder,s=i.encode(a),n=await crypto.subtle.importKey("raw",i.encode(E),"PBKDF2",!1,["deriveBits","deriveKey"]),o=crypto.getRandomValues(new Uint8Array(16)),l=await crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt"]),d=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:d},l,s),u=new Uint8Array(o.length+d.length+c.byteLength);u.set(o,0),u.set(d,o.length),u.set(new Uint8Array(c),o.length+d.length);let p=new Blob([u],{type:"application/octet-stream"}),f=URL.createObjectURL(p),m=document.createElement("a");m.href=f,m.download=`chronicle-archive-${new Date().toISOString().slice(0,10)}.enc`,m.click(),URL.revokeObjectURL(f),S("Encrypted archive exported successfully."),N("")}catch(e){S(`Encryption error: ${e instanceof Error?e.message:"Unknown"}`)}},L=async e=>{let r=e.target.files?.[0];if(r){U(!0),S(null);try{if(r.name.endsWith(".enc")){if(!k||k.length<8){S("Please enter the passphrase used to encrypt this archive."),U(!1);return}let e=await r.arrayBuffer(),t=new Uint8Array(e),a=t.slice(0,16),i=t.slice(16,28),s=t.slice(28),n=new TextEncoder,o=await crypto.subtle.importKey("raw",n.encode(k),"PBKDF2",!1,["deriveBits","deriveKey"]),l=await crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["decrypt"]),d=await crypto.subtle.decrypt({name:"AES-GCM",iv:i},l,s),c=new TextDecoder().decode(d);await K(JSON.parse(c))}else{let e=await r.text();await K(JSON.parse(e))}}catch(e){e instanceof DOMException&&"OperationError"===e.name?S("Decryption failed. Check your passphrase."):S(`Import error: ${e instanceof Error?e.message:"Unknown"}`)}finally{U(!1),O.current&&(O.current.value="")}}},K=async e=>{let r=0,t=0,a=0;if(e.headers&&e.headers.headers){let r=await (0,h.importHeaderStore)(e.headers);r.ok&&(a=r.imported)}if(Array.isArray(e.beef))for(let r of e.beef)(await b(r)).ok&&t++;if(Array.isArray(e.dossiers))for(let t of e.dossiers)await f(t),r++;Array.isArray(e.buckets)&&e.buckets.length>0&&m(e.buckets),await j(),await w(),await v(),S(`Imported ${r} dossiers, ${t} BEEF archives, ${a} headers.`),A("")};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Export & Backup"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Export your Cold Vault archive for backup or transfer to another device."})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,r.jsxs)(l.Badge,{variant:"outline",children:[D," dossiers"]}),(0,r.jsxs)(l.Badge,{variant:"outline",children:[R," BEEF archives"]}),(0,r.jsxs)(l.Badge,{variant:"outline",children:[P," buckets"]})]}),C&&(0,r.jsx)("div",{className:"rounded-md border border-blue-500/20 bg-blue-500/5 p-3 text-sm text-blue-600 dark:text-blue-400",children:C}),(0,r.jsx)(d.Separator,{}),(0,r.jsxs)(i.Card,{className:"border-primary/30",children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Selective Export"})}),(0,r.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Export specific UTXOs with their BEEF proofs. Useful for restoring individual UTXOs to a wallet or sharing proof bundles."}),(0,r.jsx)(s.Button,{asChild:!0,variant:"outline",children:(0,r.jsx)(a.default,{href:"/dossiers",children:"Go to Dossiers â†’ Select & Export"})})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Full Export (Unencrypted)"})}),(0,r.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Export everything as a plain JSON archive. Use this for quick backups on trusted devices."}),(0,r.jsx)(s.Button,{onClick:T,children:"Export Full Archive (JSON)"})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Export (Encrypted)"})}),(0,r.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Export an AES-256-GCM encrypted archive. Use this for backups on untrusted storage or for air-gapped transfer."}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.Label,{children:"Passphrase (min 8 characters)"}),(0,r.jsx)(n.Input,{type:"password",placeholder:"Enter passphrase",value:E,onChange:e=>N(e.target.value)})]}),(0,r.jsx)(s.Button,{onClick:I,children:"Export Encrypted"})]})]}),(0,r.jsx)(d.Separator,{}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Import Archive"})}),(0,r.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Import a Chronicle archive to restore your dossiers, BEEF, and headers. Supports both plain JSON (.json) and encrypted (.enc) archives."}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.Label,{children:"Passphrase (for encrypted archives)"}),(0,r.jsx)(n.Input,{type:"password",placeholder:"Enter passphrase if importing .enc file",value:k,onChange:e=>A(e.target.value)})]}),(0,r.jsx)("input",{ref:O,type:"file",accept:".json,.enc",onChange:L,className:"hidden"}),(0,r.jsx)(s.Button,{onClick:()=>{O.current?.click()},disabled:B,children:B?"Importing...":"Select Archive File"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Note: Importing will merge with existing data. Duplicate entries will be updated."})]})]})]})}e.s(["default",()=>x])}]);