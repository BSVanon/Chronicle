(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function o({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>o,"CardHeader",()=>n,"CardTitle",()=>i])},72436,48425,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(74080);var a=e.i(91918),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{let i=(0,a.createSlot)(`Primitive.${n}`),o=r.forwardRef((e,r)=>{let{asChild:a,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?i:n,{...o,ref:r})});return o.displayName=`Primitive.${n}`,{...e,[n]:o}},{});e.s(["Primitive",()=>n],48425);var i="horizontal",o=["horizontal","vertical"],s=r.forwardRef((e,r)=>{var a;let{decorative:s,orientation:l=i,...c}=e,d=(a=l,o.includes(a))?l:i;return(0,t.jsx)(n.div,{"data-orientation":d,...s?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...c,ref:r})});s.displayName="Separator";var l=e.i(75157);function c({className:e,orientation:r="horizontal",decorative:a=!0,...n}){return(0,t.jsx)(s,{"data-slot":"separator",decorative:a,orientation:r,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...n})}e.s(["Separator",()=>c],72436)},24687,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},4303,e=>{"use strict";let t="https://api.whatsonchain.com/v1/bsv/main";function r(e){let t=e=>{let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!0),Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")},r=e=>(e.match(/.{2}/g)??[]).reverse().join(""),a=parseInt(e.bits,16);return[t(e.version),r(e.prevBlockHash.padStart(64,"0")),r(e.merkleRoot.padStart(64,"0")),t(e.time),t(a),t(e.nonce)].join("")}async function a(e,r){try{let a=await fetch(`${t}/block/height/${e}`,{signal:r});if(!a.ok)return null;let n=await a.json();return{hash:n.hash,height:n.height,version:n.version,prevBlockHash:n.previousblockhash??"",merkleRoot:n.merkleroot,time:n.time,bits:n.bits,nonce:n.nonce}}catch{return null}}async function n(e){try{let r=await fetch(`${t}/chain/info`,{signal:e});if(!r.ok)return null;return(await r.json()).blocks??null}catch{return null}}let i=[{name:"WhatsOnChain",fetchTip:n,fetchHeader:a}];async function o(e){let t=[],r=i.map(async t=>{try{let r=await t.fetchTip(e);return{source:t.name,height:r}}catch{return{source:t.name,height:null}}});t.push(...await Promise.all(r));let a=t.filter(e=>null!==e.height);if(0===a.length)return{height:null,consensus:!1,sources:[]};if(1===a.length)return{height:a[0].height,consensus:!1,sources:[a[0].source]};let n=new Map;for(let e of a)if(null!==e.height){let t=n.get(e.height)||[];t.push(e.source),n.set(e.height,t)}let o=null,s=[];for(let[e,t]of n)t.length>=2&&t.length>s.length&&(o=e,s=t);if(null!==o)return{height:o,consensus:!0,sources:s};let l=a.reduce((e,t)=>(t.height??0)>(e.height??0)?t:e);return{height:l.height,consensus:!1,sources:[l.source]}}async function s(e,r){try{let a=await fetch(`${t}/tx/${e}/hex`,{signal:r});if(!a.ok)return null;return await a.text()}catch{return null}}async function l(r,a){try{let{Beef:n,MerklePath:i,Transaction:o}=await e.A(28627),l=await s(r,a);if(!l)return console.warn(`[assembleBeef] Could not fetch raw tx for ${r}`),null;let c=await fetch(`${t}/tx/${r}/proof/tsc`,{signal:a});if(!c.ok)return console.warn(`[assembleBeef] Could not fetch TSC proof for ${r}`),null;let d=await c.json(),h=Array.isArray(d)?d[0]:d;if(!h||"number"!=typeof h.index||!Array.isArray(h.nodes))return console.warn(`[assembleBeef] Invalid TSC proof format for ${r}`,h),null;let u="height"===h.targetType?h.target:h.blockHeight??0;if(!u){let e=h.target;if(e&&"string"==typeof e&&64===e.length){let r=await fetch(`${t}/block/hash/${e}`,{signal:a});if(r.ok){let e=await r.json();e.height&&(h.blockHeight=e.height)}}}let f=h.blockHeight??u;if(!f)return console.warn(`[assembleBeef] Could not determine block height for ${r}`),null;let m=[],p=h.index,g=[{offset:p,hash:r,txid:!0}];if(h.nodes.length>0){let e=h.nodes[0],t=p%2==0?p+1:p-1;"*"===e?g.push({offset:t,duplicate:!0}):g.push({offset:t,hash:e})}m.push(g),p=Math.floor(p/2);for(let e=1;e<h.nodes.length;e++){let t=h.nodes[e],r=p%2==0?p+1:p-1,a=[];"*"===t?a.push({offset:r,duplicate:!0}):a.push({offset:r,hash:t}),m.push(a),p=Math.floor(p/2)}let x=new i(f,m);x.computeRoot(r);let w=o.fromHex(l);w.merklePath=x;let b=new n;return b.mergeTransaction(w),{beefHex:b.toHex(),height:f}}catch(e){return console.error(`[assembleBeef] Error assembling BEEF for ${r}:`,e),null}}e.s(["assembleBeefFromTxid",()=>l,"constructHeaderHex",()=>r,"fetchChainTip",()=>n,"fetchChainTipMultiSource",()=>o,"fetchHeaderByHeight",()=>a,"fetchRawTx",()=>s])},27721,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(15288),n=e.i(19455),i=e.i(87486),o=e.i(72436),s=e.i(24687),l=e.i(28409),c=e.i(72988),d=e.i(4303);function h(){let{mode:e}=(0,l.useNetworkMode)(),[h,u]=r.useState(null),[f,m]=r.useState(0),[p,g]=r.useState(!0),[x,w]=r.useState(null),[b,v]=r.useState(""),[y,k]=r.useState(!1),[j,H]=r.useState(null),C=r.useCallback(async()=>{g(!0);try{let e=await (0,c.getTipHeight)(),t=await (0,c.getHeaderCount)();u(e),m(t)}finally{g(!1)}},[]);r.useEffect(()=>{C()},[C]);let $=async()=>{w(null);try{let e=await (0,c.exportHeaderStore)(),t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=`chronicle-headers-${new Date().toISOString().slice(0,10)}.json`,n.click(),URL.revokeObjectURL(a),w("Headers exported successfully.")}catch(e){w(`Export error: ${e instanceof Error?e.message:"Unknown"}`)}},S=async()=>{if(w(null),!b.trim())return void w("Please paste header data to import.");try{let e=JSON.parse(b),t=await (0,c.importHeaderStore)(e);t.ok?(w(`Imported ${t.imported} headers.`),v(""),await C()):w(`Import failed: ${t.message}`)}catch(e){w(`Import error: ${e instanceof Error?e.message:"Unknown"}`)}},N=async()=>{if("offline"===e)return void w("Switch to Online mode to fetch headers.");k(!0),w(null),H("Checking chain tip...");try{let e=await (0,d.fetchChainTip)();if(null===e)return void w("Failed to fetch chain tip. Check your connection.");let t=h??0,r=t>0?t+1:e-100,a=e-r+1;if(a<=0)return void w("Headers are up to date.");a>1e3&&w(`Need to fetch ${a} headers. This may take a while. Consider importing a header file instead.`),H(`Fetching ${a} headers (${r} to ${e})...`);let n=0,i=0;for(let t=r;t<=e;t++){let e=await (0,d.fetchHeaderByHeight)(t);e&&(await (0,c.saveHeader)({height:e.height,hash:e.hash,prev_hash:e.prevBlockHash,merkle_root:e.merkleRoot,timestamp:e.time,header_hex:(0,d.constructHeaderHex)(e)}),i++),(++n%10==0||n===a)&&H(`Fetched ${n} of ${a} headers...`),n<a&&await new Promise(e=>setTimeout(e,100))}await C(),w(`Fetched and saved ${i} headers. Tip is now ${e}.`)}catch(e){w(`Fetch error: ${e instanceof Error?e.message:"Unknown"}`)}finally{k(!1),H(null)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Headers"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your local block header store for BEEF verification."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.Badge,{variant:"offline"===e?"secondary":"default",children:"offline"===e?"Offline":"Online"}),p?(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."}):(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[f," headers stored â€¢ Tip: ",h??"none"]})]}),x&&(0,t.jsx)("div",{className:"rounded-md border border-blue-500/20 bg-blue-500/5 p-3 text-sm text-blue-600 dark:text-blue-400",children:x}),j&&(0,t.jsx)("div",{className:"rounded-md border border-yellow-500/20 bg-yellow-500/5 p-3 text-sm text-yellow-600 dark:text-yellow-400",children:j}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(n.Button,{onClick:N,disabled:"offline"===e||y,children:y?"Fetching...":"Update Headers (Online)"}),(0,t.jsx)(n.Button,{variant:"outline",onClick:$,disabled:y,children:"Export Headers"})]}),(0,t.jsx)(o.Separator,{}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:"Import Headers"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Paste a Chronicle headers JSON file to import headers offline."}),(0,t.jsx)(s.Textarea,{placeholder:'{"version": 1, "tipHeight": 123456, "headers": [...]}',value:b,onChange:e=>v(e.target.value),rows:6}),(0,t.jsx)(n.Button,{onClick:S,children:"Import"})]})]})]})}e.s(["default",()=>h])},28627,e=>{e.v(t=>Promise.all(["static/chunks/4c8470885cb93521.js","static/chunks/1cf82a77f52cdf80.js"].map(t=>e.l(t))).then(()=>t(44270)))}]);